{"ast":null,"code":"import _objectSpread from\"D:/voting/voting_app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useParams,useNavigate,useLocation}from\"react-router-dom\";import axios from\"axios\";import{useAuth}from\"../contexts/AuthContext\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ViewPoll=()=>{var _poll$creator,_poll$settings,_poll$settings2;const{id,token}=useParams();const location=useLocation();const{user,loading:authLoading}=useAuth();const[poll,setPoll]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");const[hasVoted,setHasVoted]=useState(false);const[answers,setAnswers]=useState({});const[submitting,setSubmitting]=useState(false);const[visibleFollowUps,setVisibleFollowUps]=useState({});const[showResults,setShowResults]=useState(false);const[followUpAnswers,setFollowUpAnswers]=useState({});const[passwordPrompt,setPasswordPrompt]=useState(\"\");const[showPasswordInput,setShowPasswordInput]=useState(false);const[pollPassword,setPollPassword]=useState(\"\");const[showVoters,setShowVoters]=useState(null);useEffect(()=>{if(!authLoading){fetchPoll();}// eslint-disable-next-line\n},[id,token,authLoading]);const fetchPoll=async password=>{try{setLoading(true);let response;if(token){response=await axios.post(\"/api/polls/invite/\".concat(token,\"/verify\"),{password});}else{response=await axios.get(\"/api/polls/\".concat(id));}setPoll(response.data.poll);setHasVoted(response.data.hasVoted||false);// Initialize answers\nconst initialAnswers={};response.data.poll.questions.forEach(question=>{initialAnswers[question._id]=null;});setAnswers(initialAnswers);setShowPasswordInput(false);setPasswordPrompt(\"\");}catch(error){var _error$response,_error$response2;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401||((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===403){setShowPasswordInput(true);setPasswordPrompt(\"Enter the poll password to view this private poll.\");}else{var _error$response3,_error$response3$data;setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||\"Failed to load poll\");}}finally{setLoading(false);}};const handlePasswordSubmit=async e=>{e.preventDefault();setError(\"\");await fetchPoll(pollPassword);};// --- Update: handleAnswerChange to clear unrelated follow-up answers for single-choice ---\nconst handleAnswerChange=function(questionId,answer){let hasFollowUp=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;setAnswers(prev=>_objectSpread(_objectSpread({},prev),{},{[questionId]:answer}));// For single-choice, clear all follow-up answers except for the selected option\nsetFollowUpAnswers(prev=>{const newAnswers=_objectSpread({},prev);if(newAnswers[questionId]){Object.keys(newAnswers[questionId]).forEach(optIdx=>{if(parseInt(optIdx)!==answer){delete newAnswers[questionId][optIdx];}});}return newAnswers;});// Show/hide follow-up\nsetVisibleFollowUps(prev=>_objectSpread(_objectSpread({},prev),{},{[questionId]:hasFollowUp}));};const handleFollowUpAnswerChange=(questionId,optionIndex,answer)=>{setFollowUpAnswers(prev=>_objectSpread(_objectSpread({},prev),{},{[questionId]:_objectSpread(_objectSpread({},prev[questionId]),{},{[optionIndex]:answer})}));};const handleSubmitVote=async e=>{e.preventDefault();try{setSubmitting(true);setError(\"\");// Validate answers\nconst hasUnansweredRequired=poll.questions.some(question=>{const answer=answers[question._id];if(!question.required)return false;// For single choice\nif(question.type===\"single-choice\"){return answer===null||answer===undefined;}// For multiple choice\nif(question.type===\"multiple-choice\"){return!Array.isArray(answer)||answer.length===0;}return false;});if(hasUnansweredRequired){setError(\"Please answer all required questions\");setSubmitting(false);return;}// --- Fix: handleSubmitVote follow-up validation for single-choice ---\nconst hasUnansweredFollowUps=poll.questions.some(question=>{const answer=answers[question._id];if(answer===null||answer===undefined)return false;// For single choice\nif(!Array.isArray(answer)){const option=question.options[answer];if(option!==null&&option!==void 0&&option.followUp){// Fix: check followUpAnswers[question._id]?.[answer] for the selected option index\nconst followUpAnswer=followUpAnswers[question._id]&&followUpAnswers[question._id][answer];return followUpAnswer===undefined||followUpAnswer===null;}}else{// For multiple choice, only require follow-up for selected options with followUp\nreturn answer.some(optionIndex=>{const option=question.options[optionIndex];if(option!==null&&option!==void 0&&option.followUp){const followUpAnswer=followUpAnswers[question._id]&&followUpAnswers[question._id][optionIndex];return followUpAnswer===undefined||followUpAnswer===null;}return false;});}return false;});if(hasUnansweredFollowUps){setError(\"Please answer all follow-up questions\");setSubmitting(false);return;}// Transform answers to match backend expectations\nconst transformedAnswers=poll.questions.map(question=>{const answer=answers[question._id];if(answer===null||answer===undefined)return null;const transformedAnswer={questionId:question._id,answer:answer,followUpAnswers:[]};// Handle follow-up answers\nif(Array.isArray(answer)){// Multiple choice\nanswer.forEach(optionIndex=>{var _followUpAnswers$ques;if(((_followUpAnswers$ques=followUpAnswers[question._id])===null||_followUpAnswers$ques===void 0?void 0:_followUpAnswers$ques[optionIndex])!==undefined){transformedAnswer.followUpAnswers.push({optionIndex,answer:followUpAnswers[question._id][optionIndex]});}});}else{var _followUpAnswers$ques2;// Single choice\nif(((_followUpAnswers$ques2=followUpAnswers[question._id])===null||_followUpAnswers$ques2===void 0?void 0:_followUpAnswers$ques2[answer])!==undefined){transformedAnswer.followUpAnswers.push({optionIndex:answer,answer:followUpAnswers[question._id][answer]});}}return transformedAnswer;}).filter(Boolean);const response=await axios.post(\"/api/polls/\".concat(poll._id,\"/vote\"),{answers:transformedAnswers});setHasVoted(true);setPoll(response.data.poll);setShowResults(true);}catch(error){var _error$response4,_error$response4$data;console.error(\"Error submitting vote:\",error);setError(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||\"Failed to submit vote. Please try again.\");}finally{setSubmitting(false);}};const calculatePercentage=(votes,total)=>{if(total===0)return 0;return Math.round(votes/total*100);};// Show invite link if private poll and ?showInvite=1 in query\nconst showInvite=poll&&poll.isPublic===false&&poll.inviteToken&&new URLSearchParams(location.search).get(\"showInvite\")===\"1\";if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"view-poll-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading poll...\"})]})})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"view-poll-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-error\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-circle\"}),error]})})});}if(showPasswordInput){return/*#__PURE__*/_jsx(\"div\",{className:\"view-poll-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock\"}),passwordPrompt]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePasswordSubmit,style:{maxWidth:400,margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-input\",placeholder:\"Poll password\",value:pollPassword,onChange:e=>setPollPassword(e.target.value),required:true,style:{marginBottom:12}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-full\",children:\"Unlock Poll\"})]})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"view-poll-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-sm\",children:[showInvite&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-info\",style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-link\"}),\"Invite link:\",\" \",/*#__PURE__*/_jsxs(\"a\",{href:\"\".concat(window.location.origin,\"/poll/invite/\").concat(poll.inviteToken),target:\"_blank\",rel:\"noopener noreferrer\",children:[window.location.origin,\"/poll/invite/\",poll.inviteToken]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"poll-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",marginBottom:\"8px\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:poll.title}),poll.pollType&&/*#__PURE__*/_jsx(\"span\",{style:{padding:\"6px 12px\",fontSize:14,backgroundColor:poll.pollType===\"business\"?\"#e3f2fd\":\"#f3e5f5\",color:poll.pollType===\"business\"?\"#1976d2\":\"#7b1fa2\",borderRadius:8,textTransform:\"uppercase\",fontWeight:600,letterSpacing:\"0.5px\"},children:poll.pollType})]}),poll.description&&/*#__PURE__*/_jsx(\"p\",{children:poll.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"poll-meta\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"poll-creator\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Created by \",((_poll$creator=poll.creator)===null||_poll$creator===void 0?void 0:_poll$creator.name)||\"Anonymous\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"poll-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chart-bar\"}),\" \",poll.totalResponses,\" \",\"responses\"]}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:\"16px\"},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-\".concat((_poll$settings=poll.settings)!==null&&_poll$settings!==void 0&&_poll$settings.showUserDetails?\"eye\":\"eye-slash\")}),(_poll$settings2=poll.settings)!==null&&_poll$settings2!==void 0&&_poll$settings2.showUserDetails?\"User details visible to creator\":\"User details hidden from creator\"]})]})]})]}),!user?/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock\"}),\"You must be signed in to vote in this poll.\"]}):!hasVoted?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitVote,className:\"poll-form\",children:[poll.questions.map((question,index)=>{var _question$options$ans;return/*#__PURE__*/_jsxs(\"div\",{className:\"question-container\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Question \",index+1]}),/*#__PURE__*/_jsx(\"p\",{className:\"question-text\",children:question.question}),/*#__PURE__*/_jsx(\"div\",{className:\"options-container\",children:question.options.map((option,optionIndex)=>/*#__PURE__*/_jsxs(\"label\",{className:\"option-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:question._id,value:optionIndex,onChange:e=>handleAnswerChange(question._id,parseInt(e.target.value),option.followUp!==null),required:question.required}),/*#__PURE__*/_jsx(\"span\",{className:\"option-text\",children:option.text})]},optionIndex))}),visibleFollowUps[question._id]&&!Array.isArray(answers[question._id])&&((_question$options$ans=question.options[answers[question._id]])===null||_question$options$ans===void 0?void 0:_question$options$ans.followUp)&&/*#__PURE__*/_jsx(\"div\",{className:\"follow-up-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"follow-up-question\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"question-text\",children:question.options[answers[question._id]].followUp.question}),/*#__PURE__*/_jsx(\"div\",{className:\"options-container\",children:question.options[answers[question._id]].followUp.options.map((followUpOption,followUpOptionIndex)=>{var _followUpAnswers$ques3;return/*#__PURE__*/_jsxs(\"label\",{className:\"option-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"\".concat(question._id,\"-followup\"),value:followUpOptionIndex,checked:((_followUpAnswers$ques3=followUpAnswers[question._id])===null||_followUpAnswers$ques3===void 0?void 0:_followUpAnswers$ques3[answers[question._id]])===followUpOptionIndex,onChange:e=>handleFollowUpAnswerChange(question._id,answers[question._id],parseInt(e.target.value)),required:question.options[answers[question._id]].followUp.required}),/*#__PURE__*/_jsx(\"span\",{className:\"option-text\",children:followUpOption.text})]},followUpOptionIndex);})})]})})]},question._id);}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-lg btn-full\",disabled:submitting,children:submitting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),\"Submitting...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-vote-yea\"}),\"Submit Vote\"]})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"poll-results\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"results-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Results\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Thank you for voting! Here are the current results:\"})]}),poll.questions.map((question,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"question-results\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Question \",index+1]}),/*#__PURE__*/_jsx(\"p\",{className:\"question-text\",children:question.question}),/*#__PURE__*/_jsx(\"div\",{className:\"results-container\",children:question.options.map((option,optionIndex)=>{var _poll$settings3,_poll$creator2,_poll$settings5,_poll$creator4;const percentage=calculatePercentage(option.votes,poll.totalResponses);return/*#__PURE__*/_jsxs(\"div\",{className:\"result-option\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"result-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"option-text\",children:option.text}),/*#__PURE__*/_jsxs(\"span\",{className:\"result-percentage\",children:[percentage,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"result-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"result-fill\",style:{width:\"\".concat(percentage,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:(_poll$settings3=poll.settings)!==null&&_poll$settings3!==void 0&&_poll$settings3.showUserDetails&&(user===null||user===void 0?void 0:user._id)===((_poll$creator2=poll.creator)===null||_poll$creator2===void 0?void 0:_poll$creator2._id)&&option.votes>0?\"result-votes clickable-votes\":\"result-votes\",onClick:()=>{var _poll$settings4,_poll$creator3;if((_poll$settings4=poll.settings)!==null&&_poll$settings4!==void 0&&_poll$settings4.showUserDetails&&(user===null||user===void 0?void 0:user._id)===((_poll$creator3=poll.creator)===null||_poll$creator3===void 0?void 0:_poll$creator3._id)&&option.votes>0){setShowVoters({questionId:question._id,optionIndex});}},children:[option.votes,\" votes\"]}),showVoters&&showVoters.questionId===question._id&&showVoters.optionIndex===optionIndex&&((_poll$settings5=poll.settings)===null||_poll$settings5===void 0?void 0:_poll$settings5.showUserDetails)&&(user===null||user===void 0?void 0:user._id)===((_poll$creator4=poll.creator)===null||_poll$creator4===void 0?void 0:_poll$creator4._id)&&/*#__PURE__*/_jsx(\"div\",{className:\"voter-modal-overlay\",onClick:()=>setShowVoters(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"voter-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Voters for \\\"\",option.text,\"\\\"\"]}),/*#__PURE__*/_jsx(\"ul\",{children:poll.responses.filter(response=>response.answers.some(ans=>ans.questionId===question._id&&(Array.isArray(ans.answer)?ans.answer.includes(optionIndex):ans.answer===optionIndex))).map(response=>{var _response$user;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"}),\" \",((_response$user=response.user)===null||_response$user===void 0?void 0:_response$user.name)||'Anonymous']},response._id);})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setShowVoters(null),children:\"Close\"})]})})]},optionIndex);})})]},question._id))]})]})});};export default ViewPoll;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useLocation","axios","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ViewPoll","_poll$creator","_poll$settings","_poll$settings2","id","token","location","user","loading","authLoading","poll","setPoll","setLoading","error","setError","hasVoted","setHasVoted","answers","setAnswers","submitting","setSubmitting","visibleFollowUps","setVisibleFollowUps","showResults","setShowResults","followUpAnswers","setFollowUpAnswers","passwordPrompt","setPasswordPrompt","showPasswordInput","setShowPasswordInput","pollPassword","setPollPassword","showVoters","setShowVoters","fetchPoll","password","response","post","concat","get","data","initialAnswers","questions","forEach","question","_id","_error$response","_error$response2","status","_error$response3","_error$response3$data","message","handlePasswordSubmit","e","preventDefault","handleAnswerChange","questionId","answer","hasFollowUp","arguments","length","undefined","prev","_objectSpread","newAnswers","Object","keys","optIdx","parseInt","handleFollowUpAnswerChange","optionIndex","handleSubmitVote","hasUnansweredRequired","some","required","type","Array","isArray","hasUnansweredFollowUps","option","options","followUp","followUpAnswer","transformedAnswers","map","transformedAnswer","_followUpAnswers$ques","push","_followUpAnswers$ques2","filter","Boolean","_error$response4","_error$response4$data","console","calculatePercentage","votes","total","Math","round","showInvite","isPublic","inviteToken","URLSearchParams","search","className","children","onSubmit","style","maxWidth","margin","placeholder","value","onChange","target","marginBottom","href","window","origin","rel","display","alignItems","justifyContent","title","pollType","padding","fontSize","backgroundColor","color","borderRadius","textTransform","fontWeight","letterSpacing","description","creator","name","totalResponses","marginLeft","settings","showUserDetails","index","_question$options$ans","text","followUpOption","followUpOptionIndex","_followUpAnswers$ques3","checked","disabled","_poll$settings3","_poll$creator2","_poll$settings5","_poll$creator4","percentage","width","onClick","_poll$settings4","_poll$creator3","stopPropagation","responses","ans","includes","_response$user"],"sources":["D:/voting/voting_app/frontend/src/pages/ViewPoll.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useAuth } from \"../contexts/AuthContext\";\n\nconst ViewPoll = () => {\n  const { id, token } = useParams();\n  const location = useLocation();\n  const { user, loading: authLoading } = useAuth();\n  const [poll, setPoll] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [hasVoted, setHasVoted] = useState(false);\n  const [answers, setAnswers] = useState({});\n  const [submitting, setSubmitting] = useState(false);\n  const [visibleFollowUps, setVisibleFollowUps] = useState({});\n  const [showResults, setShowResults] = useState(false);\n  const [followUpAnswers, setFollowUpAnswers] = useState({});\n  const [passwordPrompt, setPasswordPrompt] = useState(\"\");\n  const [showPasswordInput, setShowPasswordInput] = useState(false);\n  const [pollPassword, setPollPassword] = useState(\"\");\n  const [showVoters, setShowVoters] = useState(null);\n\n  useEffect(() => {\n    if (!authLoading) {\n      fetchPoll();\n    }\n  // eslint-disable-next-line\n  }, [id, token, authLoading]);\n\n  const fetchPoll = async (password) => {\n    try {\n      setLoading(true);\n      let response;\n      if (token) {\n        response = await axios.post(`/api/polls/invite/${token}/verify`, {\n          password,\n        });\n      } else {\n        response = await axios.get(`/api/polls/${id}`);\n      }\n      setPoll(response.data.poll);\n      setHasVoted(response.data.hasVoted || false);\n\n      // Initialize answers\n      const initialAnswers = {};\n      response.data.poll.questions.forEach((question) => {\n        initialAnswers[question._id] = null;\n      });\n      setAnswers(initialAnswers);\n      setShowPasswordInput(false);\n      setPasswordPrompt(\"\");\n    } catch (error) {\n      if (error.response?.status === 401 || error.response?.status === 403) {\n        setShowPasswordInput(true);\n        setPasswordPrompt(\"Enter the poll password to view this private poll.\");\n      } else {\n        setError(error.response?.data?.message || \"Failed to load poll\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePasswordSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    await fetchPoll(pollPassword);\n  };\n\n  // --- Update: handleAnswerChange to clear unrelated follow-up answers for single-choice ---\n  const handleAnswerChange = (questionId, answer, hasFollowUp = false) => {\n    setAnswers((prev) => ({\n      ...prev,\n      [questionId]: answer,\n    }));\n\n    // For single-choice, clear all follow-up answers except for the selected option\n    setFollowUpAnswers((prev) => {\n      const newAnswers = { ...prev };\n      if (newAnswers[questionId]) {\n        Object.keys(newAnswers[questionId]).forEach((optIdx) => {\n          if (parseInt(optIdx) !== answer) {\n            delete newAnswers[questionId][optIdx];\n          }\n        });\n      }\n      return newAnswers;\n    });\n\n    // Show/hide follow-up\n    setVisibleFollowUps((prev) => ({\n      ...prev,\n      [questionId]: hasFollowUp,\n    }));\n  };\n\n  const handleFollowUpAnswerChange = (questionId, optionIndex, answer) => {\n    setFollowUpAnswers((prev) => ({\n      ...prev,\n      [questionId]: {\n        ...prev[questionId],\n        [optionIndex]: answer,\n      },\n    }));\n  };\n\n  const handleSubmitVote = async (e) => {\n    e.preventDefault();\n    try {\n      setSubmitting(true);\n      setError(\"\");\n\n      // Validate answers\n      const hasUnansweredRequired = poll.questions.some((question) => {\n        const answer = answers[question._id];\n        if (!question.required) return false;\n\n        // For single choice\n        if (question.type === \"single-choice\") {\n          return answer === null || answer === undefined;\n        }\n        // For multiple choice\n        if (question.type === \"multiple-choice\") {\n          return !Array.isArray(answer) || answer.length === 0;\n        }\n        return false;\n      });\n\n      if (hasUnansweredRequired) {\n        setError(\"Please answer all required questions\");\n        setSubmitting(false);\n        return;\n      }\n\n      // --- Fix: handleSubmitVote follow-up validation for single-choice ---\n      const hasUnansweredFollowUps = poll.questions.some((question) => {\n        const answer = answers[question._id];\n        if (answer === null || answer === undefined) return false;\n        // For single choice\n        if (!Array.isArray(answer)) {\n          const option = question.options[answer];\n          if (option?.followUp) {\n            // Fix: check followUpAnswers[question._id]?.[answer] for the selected option index\n            const followUpAnswer =\n              followUpAnswers[question._id] &&\n              followUpAnswers[question._id][answer];\n            return followUpAnswer === undefined || followUpAnswer === null;\n          }\n        } else {\n          // For multiple choice, only require follow-up for selected options with followUp\n          return answer.some((optionIndex) => {\n            const option = question.options[optionIndex];\n            if (option?.followUp) {\n              const followUpAnswer =\n                followUpAnswers[question._id] &&\n                followUpAnswers[question._id][optionIndex];\n              return followUpAnswer === undefined || followUpAnswer === null;\n            }\n            return false;\n          });\n        }\n        return false;\n      });\n\n      if (hasUnansweredFollowUps) {\n        setError(\"Please answer all follow-up questions\");\n        setSubmitting(false);\n        return;\n      }\n\n      // Transform answers to match backend expectations\n      const transformedAnswers = poll.questions\n        .map((question) => {\n          const answer = answers[question._id];\n          if (answer === null || answer === undefined) return null;\n\n          const transformedAnswer = {\n            questionId: question._id,\n            answer: answer,\n            followUpAnswers: [],\n          };\n\n          // Handle follow-up answers\n          if (Array.isArray(answer)) {\n            // Multiple choice\n            answer.forEach((optionIndex) => {\n              if (followUpAnswers[question._id]?.[optionIndex] !== undefined) {\n                transformedAnswer.followUpAnswers.push({\n                  optionIndex,\n                  answer: followUpAnswers[question._id][optionIndex],\n                });\n              }\n            });\n          } else {\n            // Single choice\n            if (followUpAnswers[question._id]?.[answer] !== undefined) {\n              transformedAnswer.followUpAnswers.push({\n                optionIndex: answer,\n                answer: followUpAnswers[question._id][answer],\n              });\n            }\n          }\n\n          return transformedAnswer;\n        })\n        .filter(Boolean);\n\n      const response = await axios.post(`/api/polls/${poll._id}/vote`, {\n        answers: transformedAnswers,\n      });\n\n      setHasVoted(true);\n      setPoll(response.data.poll);\n      setShowResults(true);\n    } catch (error) {\n      console.error(\"Error submitting vote:\", error);\n      setError(\n        error.response?.data?.message ||\n          \"Failed to submit vote. Please try again.\"\n      );\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const calculatePercentage = (votes, total) => {\n    if (total === 0) return 0;\n    return Math.round((votes / total) * 100);\n  };\n\n  // Show invite link if private poll and ?showInvite=1 in query\n  const showInvite =\n    poll &&\n    poll.isPublic === false &&\n    poll.inviteToken &&\n    new URLSearchParams(location.search).get(\"showInvite\") === \"1\";\n\n  if (loading) {\n    return (\n      <div className=\"view-poll-page\">\n        <div className=\"container-sm\">\n          <div className=\"loading-container\">\n            <div className=\"spinner\"></div>\n            <p>Loading poll...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"view-poll-page\">\n        <div className=\"container-sm\">\n          <div className=\"alert alert-error\">\n            <i className=\"fas fa-exclamation-circle\"></i>\n            {error}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (showPasswordInput) {\n    return (\n      <div className=\"view-poll-page\">\n        <div className=\"container-sm\">\n          <div className=\"alert alert-warning\">\n            <i className=\"fas fa-lock\"></i>\n            {passwordPrompt}\n          </div>\n          <form\n            onSubmit={handlePasswordSubmit}\n            style={{ maxWidth: 400, margin: \"0 auto\" }}\n          >\n            <input\n              type=\"password\"\n              className=\"form-input\"\n              placeholder=\"Poll password\"\n              value={pollPassword}\n              onChange={(e) => setPollPassword(e.target.value)}\n              required\n              style={{ marginBottom: 12 }}\n            />\n            <button type=\"submit\" className=\"btn btn-primary btn-full\">\n              Unlock Poll\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"view-poll-page\">\n      <div className=\"container-sm\">\n        {showInvite && (\n          <div className=\"alert alert-info\" style={{ marginBottom: 16 }}>\n            <i className=\"fas fa-link\"></i>\n            Invite link:{\" \"}\n            <a\n              href={`${window.location.origin}/poll/invite/${poll.inviteToken}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {window.location.origin}/poll/invite/{poll.inviteToken}\n            </a>\n          </div>\n        )}\n\n        <div className=\"poll-header\">\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n              marginBottom: \"8px\",\n            }}\n          >\n            <h1>{poll.title}</h1>\n            {poll.pollType && (\n              <span\n                style={{\n                  padding: \"6px 12px\",\n                  fontSize: 14,\n                  backgroundColor:\n                    poll.pollType === \"business\" ? \"#e3f2fd\" : \"#f3e5f5\",\n                  color: poll.pollType === \"business\" ? \"#1976d2\" : \"#7b1fa2\",\n                  borderRadius: 8,\n                  textTransform: \"uppercase\",\n                  fontWeight: 600,\n                  letterSpacing: \"0.5px\",\n                }}\n              >\n                {poll.pollType}\n              </span>\n            )}\n          </div>\n          {poll.description && <p>{poll.description}</p>}\n\n          <div className=\"poll-meta\">\n            <div className=\"poll-creator\">\n              <i className=\"fas fa-user\"></i>\n              <span>Created by {poll.creator?.name || \"Anonymous\"}</span>\n            </div>\n            <div className=\"poll-stats\">\n              <span>\n                <i className=\"fas fa-chart-bar\"></i> {poll.totalResponses}{\" \"}\n                responses\n              </span>\n              <span style={{ marginLeft: \"16px\" }}>\n                <i\n                  className={`fas fa-${\n                    poll.settings?.showUserDetails ? \"eye\" : \"eye-slash\"\n                  }`}\n                ></i>\n                {poll.settings?.showUserDetails\n                  ? \"User details visible to creator\"\n                  : \"User details hidden from creator\"}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {!user ? (\n          <div className=\"alert alert-warning\" style={{ marginBottom: 16 }}>\n            <i className=\"fas fa-lock\"></i>\n            You must be signed in to vote in this poll.\n          </div>\n        ) : !hasVoted ? (\n          <form onSubmit={handleSubmitVote} className=\"poll-form\">\n            {poll.questions.map((question, index) => (\n              <div key={question._id} className=\"question-container\">\n                <h3>Question {index + 1}</h3>\n                <p className=\"question-text\">{question.question}</p>\n\n                <div className=\"options-container\">\n                  {question.options.map((option, optionIndex) => (\n                    <label key={optionIndex} className=\"option-label\">\n                      <input\n                        type=\"radio\"\n                        name={question._id}\n                        value={optionIndex}\n                        onChange={(e) =>\n                          handleAnswerChange(\n                            question._id,\n                            parseInt(e.target.value),\n                            option.followUp !== null\n                          )\n                        }\n                        required={question.required}\n                      />\n                      <span className=\"option-text\">{option.text}</span>\n                    </label>\n                  ))}\n                </div>\n\n                {/* Render follow-up question if visible */}\n                {visibleFollowUps[question._id] &&\n                  !Array.isArray(answers[question._id]) &&\n                  question.options[answers[question._id]]?.followUp && (\n                    <div className=\"follow-up-container\">\n                      <div className=\"follow-up-question\">\n                        <p className=\"question-text\">\n                          {\n                            question.options[answers[question._id]].followUp\n                              .question\n                          }\n                        </p>\n                        <div className=\"options-container\">\n                          {question.options[\n                            answers[question._id]\n                          ].followUp.options.map(\n                            (followUpOption, followUpOptionIndex) => (\n                              <label\n                                key={followUpOptionIndex}\n                                className=\"option-label\"\n                              >\n                                <input\n                                  type=\"radio\"\n                                  name={`${question._id}-followup`}\n                                  value={followUpOptionIndex}\n                                  checked={\n                                    followUpAnswers[question._id]?.[\n                                      answers[question._id]\n                                    ] === followUpOptionIndex\n                                  }\n                                  onChange={(e) =>\n                                    handleFollowUpAnswerChange(\n                                      question._id,\n                                      answers[question._id],\n                                      parseInt(e.target.value)\n                                    )\n                                  }\n                                  required={\n                                    question.options[answers[question._id]]\n                                      .followUp.required\n                                  }\n                                />\n                                <span className=\"option-text\">\n                                  {followUpOption.text}\n                                </span>\n                              </label>\n                            )\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n              </div>\n            ))}\n\n            <button\n              type=\"submit\"\n              className=\"btn btn-primary btn-lg btn-full\"\n              disabled={submitting}\n            >\n              {submitting ? (\n                <>\n                  <div className=\"spinner\"></div>\n                  Submitting...\n                </>\n              ) : (\n                <>\n                  <i className=\"fas fa-vote-yea\"></i>\n                  Submit Vote\n                </>\n              )}\n            </button>\n          </form>\n        ) : (\n          <div className=\"poll-results\">\n            <div className=\"results-header\">\n              <h2>Results</h2>\n              <p>Thank you for voting! Here are the current results:</p>\n            </div>\n\n            {poll.questions.map((question, index) => (\n              <div key={question._id} className=\"question-results\">\n                <h3>Question {index + 1}</h3>\n                <p className=\"question-text\">{question.question}</p>\n\n                <div className=\"results-container\">\n                  {question.options.map((option, optionIndex) => {\n                    const percentage = calculatePercentage(\n                      option.votes,\n                      poll.totalResponses\n                    );\n                    return (\n                      <div key={optionIndex} className=\"result-option\">\n                        <div className=\"result-header\">\n                          <span className=\"option-text\">{option.text}</span>\n                          <span className=\"result-percentage\">\n                            {percentage}%\n                          </span>\n                        </div>\n                        <div className=\"result-bar\">\n                          <div\n                            className=\"result-fill\"\n                            style={{ width: `${percentage}%` }}\n                          ></div>\n                        </div>\n                        <div\n                          className={\n                            poll.settings?.showUserDetails && user?._id === poll.creator?._id && option.votes > 0\n                              ? \"result-votes clickable-votes\"\n                              : \"result-votes\"\n                          }\n                          onClick={() => {\n                            if (poll.settings?.showUserDetails && user?._id === poll.creator?._id && option.votes > 0) {\n                              setShowVoters({ questionId: question._id, optionIndex });\n                            }\n                          }}\n                        >\n                          {option.votes} votes\n                        </div>\n                        {/* Voter modal for poll creator */}\n                        {showVoters && showVoters.questionId === question._id && showVoters.optionIndex === optionIndex && poll.settings?.showUserDetails && user?._id === poll.creator?._id && (\n                          <div className=\"voter-modal-overlay\" onClick={() => setShowVoters(null)}>\n                            <div className=\"voter-modal\" onClick={e => e.stopPropagation()}>\n                              <h4>Voters for \"{option.text}\"</h4>\n                              <ul>\n                                {poll.responses\n                                  .filter(response =>\n                                    response.answers.some(ans =>\n                                      ans.questionId === question._id &&\n                                      (Array.isArray(ans.answer)\n                                        ? ans.answer.includes(optionIndex)\n                                        : ans.answer === optionIndex)\n                                    )\n                                  )\n                                  .map(response => (\n                                    <li key={response._id}>\n                                      <i className=\"fas fa-user\"></i> {response.user?.name || 'Anonymous'}\n                                    </li>\n                                  ))}\n                              </ul>\n                              <button className=\"btn btn-secondary\" onClick={() => setShowVoters(null)}>Close</button>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ViewPoll;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}